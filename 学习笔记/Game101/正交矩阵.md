# lecture-4

## 正交矩阵

正交矩阵比较特殊，当且仅当其与其转置矩阵的乘积是单位矩阵时，矩阵是正交的
$$
M是正交矩阵 <=> MM^{T} = I
$$
注意到矩阵M(线性无关)与其逆矩阵$M^{T}$的乘积也是单位矩阵，所以可以有如下结论
$$
M是正交矩阵 <=> M^{T} = M^{-1}
$$

> 这是一个非常重要的结论，我们知道求一个矩阵的逆是需要大量的计算的，而如果判断出矩阵是正交的，那么可以直接利用转置矩阵充当逆矩阵完成计算，大大减少了计算耗能

> 旋转矩阵、反射矩阵都是正交矩阵！

> 如果我们确定一个矩阵仅包含旋转和反射，那么我们也可以推断出他是正交的

### 通过直接计算判断矩阵是否正交

$$
M * M^{T} = I \\
\begin{vmatrix}
m_{11} & m_{12} & m_{13} \\
m_{21} & m_{22} & m_{23} \\
m_{31} & m_{32} & m_{33} \\
\end{vmatrix} * \begin{vmatrix}
m_{11} & m_{21} & m_{31} \\
m_{12} & m_{22} & m_{32} \\
m_{13} & m_{23} & m_{33} \\
\end{vmatrix}  = \begin{vmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & 1 \\
\end{vmatrix}\\
即\\
m_{11}m_{11} + m_{12}m_{12} + m_{13}m_{13} = 1,\\
m_{11}m_{21} + m_{12}m_{22} + m_{13}m_{23} = 0,\\
m_{11}m_{31} + m_{12}m_{32} + m_{13}m_{33} = 0,\\
m_{21}m_{11} + m_{22}m_{12} + m_{23}m_{13} = 0,\\
m_{21}m_{21} + m_{22}m_{22} + m_{23}m_{23} = 1,\\
m_{21}m_{31} + m_{22}m_{32} + m_{23}m_{33} = 0,\\
m_{31}m_{11} + m_{32}m_{12} + m_{33}m_{13} = 0,\\
m_{31}m_{21} + m_{32}m_{22} + m_{33}m_{23} = 0,\\
m_{31}m_{31} + m_{32}m_{32} + m_{33}m_{33} = 1,\\
我们可以将它换一种形式展示出来\\
设r_1、r_2、r_3均代表M的行：\\
r_1 = \begin{vmatrix}m_{11} & m_{12} & m_{13} \end{vmatrix}、r_2 = \begin{vmatrix}m_{21} & m_{22} & m_{23} \end{vmatrix}、r_3 = \begin{vmatrix}m_{31} & m_{32} & m_{33} \end{vmatrix}\\
则M = \begin{vmatrix}
-r_1- \\
-r_2- \\
-r_3- \\
\end{vmatrix}\\
则上式可以改写为\\
r_1*r_1 = 1 , r_1*r_2 = 0 , r_1*r_3 = 0\\
r_2*r_1 = 0 , r_2*r_2 = 1 , r_2*r_3 = 0\\
r_3*r_1 = 0 , r_2*r_2 = 0 , r_3*r_3 = 1\\
$$

同上面最终的变换我们可以知道

+ 由于当且仅当矢量是单位矢量时，矢量自己本省的点积才为1，所以可以知道只有当**$r_1、r_2、r_3$都为单位矩阵**时，上述3个结果为1的式子才成立

+ 由于当且仅当两个矢量相互垂直时，矢量点积才为0，所以可以知道只有当$r_1、r_2、r_3$都为相互垂直时，上诉6个结果为0的式子才成立

+ 如果以列划分也是相同的结果
+ 我们知道矢量相乘满足交换律，所以其实点乘为0的式子实际满足的只有3个约束，也即是互相垂直

## 正交化计算

### Gram-Schmidt正交化

以3x3为例，$ r_1、r_2、r_3 $表示3x3矩阵M的行，然后根据Gram-Schmidt算法计算一组正交的行矢量
$$
r_1^{'} <= r_1\\
r_2^{'} <= r_2 - \frac{r_2 * r_1^{'}}{r_1^{'} * r_1^{'}} * r_1^{'}  \\
r_3^{'} <= r_3 - \frac{r_3 * r_1^{'}}{r_1^{'} * r_1^{'}} * r_1^{'} -\frac{r_3 * r_2^{'}}{r_2^{'} * r_2^{'}} * r_2^{'}  \\
$$
对于每个基矢量，我们的想法是按顺序遍历每个基矢量，并减去与基向量平行的向量，我们希望矢量的三个方向能够变为我们正交基的三个方向，

+ 对于$ r_1 $我们可以将$r_1$为直接与$r_1^{'}$对其，这样便有一个方向重合了

+ 对于$r_2$,由于两个不同方向的矢量才能确定一个平面，那么我们可以让$r_1、r_2$与标准正交基的$r_1^{'}和r_2^{'}$构成的平面对其，这样对于$r_2 $来说我们只需要减去$r_2 $中$r_1 $方向的分量即可得到第二个正交矢量，并且可以知道减去之后$r_2是垂直于r_1$的

+ 对于r3,由于我们对$r_2 $的操作，现在$r_3$需要减去$r_2^{'} 以及 r_1^{'}$方向上的分量

> 对于三维来说 有一种更简洁的计算$r_3 $的方法，利用外积来计算$r_3$ <=> $r_1$ x $r_2$

如此便得到了一组正交基矢量，但是该基矢量不一定是单位矢量，同时Gram-Schmidt算法是有偏差的，这取决于列出的基矢量的顺序，例如$r_1$永远不会改变。而$r_3$则会改变最多(笔者感觉可以用外积来减小这个误差)

该算法有一种不偏向任何特定轴的变体，给出一个因子k，每次我们只减去他的k，而不是减去所有的投影
$$
r_1^{'} <= r_1 - k * \frac{r_1 * r_2}{r_2 * r_2} * r_2 -  k * \frac{r_1 * r_3}{r_3 * r_3} * r_3  \\
r_2^{'} <= r_2 - k * \frac{r_2 * r_1}{r_1 * r_1} * r_1 -  k * \frac{r_2 * r_3}{r_3 * r_3} * r_3  \\
r_3^{'} <= r_3 - k * \frac{r_3 * r_1}{r_1 * r_1} * r_1 -  k * \frac{r_3 * r_2}{r_2 * r_2} * r_2  \\
$$
该算法的一次每迭代一次会更加进行正交基矢量，会呈现一种收敛的状态，为k选择一个适当小的值(例如1/4)并迭代足够多的次数(如10次),会让我们相当接近正交，然后使用标准的Gram-Schmidt算法来保证获得完全的正交基
$$

$$
